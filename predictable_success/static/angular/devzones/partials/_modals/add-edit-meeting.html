<form id="meeting-modal" novalidate="novalidate">
    <a class="close" ng-click="addEditMeeting.cancel()" data-dismiss="modal">&times;</a>
    <div class="form-group" ng-show="addEditMeeting.panel_index==-1">
        <div class="modal-body">
            <panel>
                <h3 ng-show="!addEditMeeting.meeting" class="modal-title">Add a Meeting</h3>
                <h3 ng-show="addEditMeeting.meeting" class="modal-title">Edit Meeting</h3>
                <p class="modal-subtext">What's the name of the meeting?</p>
                <input
                    name="focusAreas"
                    autofocus
                    ng-model="addEditMeeting.name"
                    style="max-width:350px; margin-bottom: 25px;"
                    class="form-control edit-textarea"
                    placeholder="Add the name of the meeting here..."
                    />
                <p class="modal-subtext">Who is participating in the meeting?</p>
                <ui-select
                        id="to"
                        multiple
                        ng-model="addEditMeeting.participants"
                        reset-search-input="true"
                        theme="bootstrap"
                        style="font-size:16px;"
                        >
                    <ui-select-match placeholder="Type an employee name">{{$item.full_name}}</ui-select-match>
                    <ui-select-choices
                            repeat="employee in addEditMeeting.employees | filter: {full_name: $select.search} | orderBy: 'full_name'">
                        <span class="tiny-headshot">
                            <img class="headshot-image" ng-src="{{ employee.avatar_small }}" alt="{{ employee.full_name }}'s avatar" />
                        </span>
                        <div class="names" ng-bind-html="employee.full_name | highlight: $select.search"></div>
                    </ui-select-choices>
                </ui-select>
            </panel>
        </div>
        <div class="modal-footer">
            <button type="button" ng-click="addEditMeeting.cancel()" data-dismiss="modal" class="btn btn-light pull-left">Cancel</button>
            <button ng-disabled="!addEditMeeting.participants.length > 0 || !addEditMeeting.name" type="button" class="btn btn-success" ng-click="addEditMeeting.panel_index=0">Next &rarr;</button>
        </div>
    </div>
    <div class="form-group" ng-show="addEditMeeting.panel_index==$index" ng-repeat="participant in addEditMeeting.participants">
        <div class="modal-body">
            <panel class="devzone">
                <h3 class="modal-title">Who is {{participant.full_name }} representing?</h3>
                <ui-select
                        id="to"
                        multiple
                        ng-model="participant.employeesRepresented"
                        reset-search-input="true"
                        theme="bootstrap"
                        style="font-size:16px;"
                        >
                    <ui-select-match placeholder="Type an employee name">{{$item.full_name}}</ui-select-match>
                    <ui-select-choices
                            repeat="employee in addEditMeeting.employees | filter: {full_name: $select.search} | orderBy: 'full_name'">
                        <span class="tiny-headshot">
                            <img class="headshot-image" ng-src="{{ employee.avatar_small }}" alt="{{ employee.full_name }}'s avatar" />
                        </span>
                        <div class="names" ng-bind-html="employee.full_name | highlight: $select.search"></div>
                    </ui-select-choices>
                </ui-select>
            </panel>
        </div>
        <div class="modal-footer">
            <button type="button" ng-click="addEditMeeting.panel_index=$index-1" data-dismiss="modal" class="btn btn-light">&larr; Back</button>
            <button ng-disabled="" ng-show="!$last" type="button" class="btn btn-success" ng-click="addEditMeeting.panel_index=$index+1">Next &rarr;</button>
            <button ng-disabled="" ng-show="$last" type="button" class="btn btn-success" ng-click="addEditMeeting.panel_index=addEditMeeting.participants.length">Next &rarr;</button>
        </div>
    </div>
    <div class="form-group" ng-show="addEditMeeting.panel_index==addEditMeeting.participants.length">
        <div class="modal-body">
            <panel class="devzone">
                <h3 class="modal-title">Send Selfies?</h3>
                    <div ng-hide="addEditMeeting.meeting && addEditMeeting.meeting.active">
                        <p>Would you like to send Selfies for this meeting now?</p>
                        <div class="selfie-answer well well-sm" style="display:flex" ng-class="{'selfie-answer-selected': addEditMeeting.active, 'selfie-answer':!addEditMeeting.active}" ng-click="addEditMeeting.active=true">
                            <div class="selfie-answer-label" style="width: 91%;">
                                <h4><strong>Yes</strong></h4>
                            </div>
                            <div style="margin: auto 0px;">
                                <i class="fa fa-check-circle-o selected-icon" ng-show="addEditMeeting.active"></i>
                            </div>
                        </div>
                        <div class="selfie-answer well well-sm" style="display:flex" ng-class="{'selfie-answer-selected': !addEditMeeting.active, 'selfie-answer':addEditMeeting.active}" ng-click="addEditMeeting.active=false">
                            <div class="selfie-answer-label" style="width: 91%;">
                                <h4><strong>No</strong></h4>
                            </div>
                            <div style="margin: auto 0px;">
                                <i class="fa fa-check-circle-o selected-icon" ng-show="!addEditMeeting.active"></i>
                            </div>
                        </div>
                    </div>
                    <div ng-show="addEditMeeting.meeting && addEditMeeting.meeting.active">
                        <p>Selfies for this meeting have already been sent. Any newly created selfies will be sent immediately after you click the 'Save' button below.</p>
                    </div>
            </panel>
        </div>
        <div class="modal-footer">
            <button type="button" ng-click="addEditMeeting.panel_index=addEditMeeting.participants.length-1" data-dismiss="modal" class="btn btn-light">&larr; Back</button>
            <button ng-disabled="addEditMeeting.busy" type="button" class="btn btn-success" ng-click="addEditMeeting.save()">Save</button>
        </div>
    </div>
</form>