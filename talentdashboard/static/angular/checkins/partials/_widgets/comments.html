<!-- Comment replies -->
<div class="activity">
    <div class="activity-items distributions" style="margin-bottom: 0;border: none">
        <span class="total-replies" ng-show="viewCheckin.comments.length > 0" style="margin-top:5px;">
            <i class="fa fa-comment-o"></i> {{viewCheckin.comments.length}}
        </span>
        <div class="comment-replies">
            <div class="comment-reply" ng-repeat="comment in viewCheckin.comments | orderBy:'-created_date':true">
                <div ng-controller="CommentCtrl">
                    <div class="comment-actions pull-right">
                        <span ng-show="comment.owner.id==currentUser.id">
                            <i class="fa fa-ellipsis-h show-popover"></i>
                            <ul class="popover-items" style="display:none">
                                <li class="popover-item">
                                    <a ng-click="edit(comment)" class="edit"><i class="fa fa-pencil-square-o"></i>
                                        Edit</a>
                                </li>
                                <li class="popover-item">
                                    <a ng-click="delete(comment, viewCheckin.comments)"><i class="fa fa-trash-o"></i>
                                        Delete</a>
                                </li>
                            </ul>
                        </span>
                        <span class="timestamp"
                          title="{{ comment.created_date | date:'MMM d, yyyy h:mma' }}">{{ comment.created_date | fromNow }}</span>
                    </div>
                    <div class="comment-reply-avatar-container">
                        <a ng-href="#/employees/{{ comment.owner.employee.id }}" class="small-headshot">
                            <img ng-src="{{ comment.owner.employee.avatar_small }}"
                                 alt="{{ comment.owner.employee.full_name }}'s avatar" class="headshot-image"/>
                        </a>
                    </div>
                    <a class="comment-reply-name" ng-href="#/employees/{{ comment.owner.employee.id }}">{{ comment.owner.employee.full_name }}</a>


                    <div style="padding-left:50px;" ng-show="editMode">
                        <form name="replyEditForm">
                            <textarea
                                    ng-model="editingComment.content"
                                    msd-elastic
                                    class="form-control edit-textarea">
                            </textarea>
                            <button class="btn btn-primary btn-sm" ng-disabled="!editingComment.content"
                                    ng-click="update(replyEditForm, comment)">Save Edits
                            </button>
                            <button class="btn btn-link btn-sm"
                                    ng-click="cancelEdit()">Cancel
                            </button>
                        </form>
                    </div>
                    <div class="comment-reply-copy comment-text" ng-show="!editMode" read-more ng-model="comment.content" words="false" length="400"></div>
                </div>
            </div>
            <div class="comment-reply-textarea">
                <form name="replyForm" ng-controller="AddCheckInActivityCommentCtrl">
                    <div class="small-headshot pull-left" ng-class="{'activate-reply-image': activateReply, 'deactivate-reply-image': !activateReply}" style="margin-left: 7px">
                        <img ng-src="{{ currentUser.employee.avatar_small }}" alt="{{ currentUser.employee.full_name }}'s avatar" class="headshot-image"/>
                    </div>
                    <textarea class="form-control" ng-class="{'activate-reply': activateReply, 'deactivate-reply': !activateReply}" ng-focus="activateReply=true" name="content" msd-elastic ng-model="newComment.content" rows="1" cols="40" placeholder="Reply to this conversation..."></textarea>
                    <div style="display: inline-block;" class="small-comment animate-show" ng-show="activateReply"><button class="small-comment" ng-disabled="!newComment.content" ng-click="add(replyForm, viewCheckin.checkin.id, viewCheckin.comments)">Post</button></div>
                </form>
            </div>
        </div>
    </div>    
</div>