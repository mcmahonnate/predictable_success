<div class="container" data-hj-masked>
    <h1>ID Report</h1>
    <div class="panel">
        <div style="width:300px;">
			<div class="form-group">
				<label for="startDate"><strong>Start Date</strong></label>
				<input id="startDate" ng-model="devzonesReport.startDate" name="startDate" class="form-control" />
			</div>
			<div class="form-group" style="margin:15px 0;">
				<label for="endDate"><strong>End Date</strong></label>
				<input id="endDate" ng-model="devzonesReport.endDate" name="endDate" class="form-control" />
			</div>
			<button ng-disabled="devzonesReport.busy" ng-click="devzonesReport.getDevZonesReport()" class="btn btn-primary">Submit</button>
        </div>
    </div>
    <div>

        <div class="panel" ng-show="devzonesReport.showResults">
            <button ng-disabled="devzonesReport.busy" class="btn btn-default pull-right" type="button" ng-csv="devzonesReport.csv" filename="id-report{{devzonesReport.startDate | date:'yyyy-MM-dd'}}to{{devzonesReport.endDate | date:'yyyy-MM-dd'}}.csv" csv-header="['Id', 'Employee', 'Meeting', 'Represented By', 'Finished Selfie', 'Finished Selfie Date', 'Selfie Perception', 'Notes', 'Question', 'Answer', 'Question', 'Answer', 'Question', 'Answer', 'Question', 'Answer', 'Question', 'Answer', 'Question', 'Answer']">
                <span class="fa fa-download"></span> Download
            </button>

            <table class="table" ng-show="!devzonesReport.busy">
                <thead>
                    <tr>
                        <th></th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('employee.full_name');"><strong>Employee</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'employee.full_name'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('employee.hire_date');"><strong>Hire Date</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'employee.hire_date'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('meeting_name');"><strong>Meeting</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'meeting_name'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('development_lead.full_name');"><strong>Represented by</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'development_lead.full_name'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('completed');"><strong>Finished Selfie</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'completed'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('date');"><strong>Finished Selfie Date</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'date'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="devzonesReport.order('zone.name');"><strong>Selfie Perception</strong></a>
                            <span class="sortorder fa" ng-show="devzonesReport.predicate === 'zone.name'" ng-class="devzonesReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="report in devzonesReport.report | orderBy:devzonesReport.predicate:devzonesReport.reverse">
                        <td>{{ $index+1 }}.</td>
                        <td>
                            <a ng-href="#/employees/{{report.employee.id}}" class="tiny-headshot pull-left"><img ng-src="{{ report.employee.avatar_small }}" alt="{{ report.employee.full_name }}'s avatar"/></a>
                            <a href="#/employees/{{report.employee.id}}">{{report.employee.full_name}}</a>
                        </td>
                        <td style="text-align: center">{{report.employee.hire_date | date:'MM/dd/yyyy'}}</td>
                        <td style="text-align: center">{{report.meeting_name}}</td>
                        <td style="text-align: center">{{report.development_lead.full_name}}</td>
                        <td style="text-align: center">{{report.completed}}</td>
                        <td style="text-align: center"><span ng-show="report.completed">{{report.date | date:'MM/dd/yyyy'}}</span></td>
                        <td style="text-align: center">{{report.zone.name}}</td>
                    </tr>
                </tbody>
            </table>
            <div ng-show="devzonesReport.busy" class="no-results"><img src="../static/images/loader.gif" alt="Loading spinner" /></div>
        </div>
    </div>
</div>
