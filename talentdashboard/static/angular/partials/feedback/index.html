<div class="container">
    <div ng-show="feedback.myRecentlySentRequests.length">
        <h1>Foolish 360 Feedback
            <button class="btn btn-success btn-feedback" ng-click="feedback.requestFeedback()" type="button">Ask for Feedback</button>
            <button class="btn btn-success btn-feedback" ng-click="feedback.giveUnsolicitedFeedback()" type="button">Give Feedback</button>
        </h1>
    </div>    
    <div ng-include src="'/static/angular/partials/feedback/_welcome.html'"></div>
    <div class="panel">
        <h2 class="panel-title">
            {{ feedback.feedbackRequests.length }} 
            <span ng-show="feedback.feedbackRequests.length == 1">Person wants</span> 
            <span ng-show="feedback.feedbackRequests.length != 1">People want</span> 
            feedback
        </h2>
        <table class="table responsive-table">
            <thead>
                <tr>
                  <th class="width-percent-30">Person</th>
                  <th class="width-percent-15">Sent</th>
                  <th class="width-percent-30">Where they'd like feedback</th>
                  <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="request in feedback.feedbackRequests | orderBy:'request.requester.full_name'">
                    <td>
                        <span class="tiny-headshot">
                            <img ng-src="{{ request.requester.avatar_small }}" alt="{{ request.requester.full_name }}'s avatar" />
                        </span>  
                        {{ request.requester.full_name }}
                    </td>
                    <td class="timeago">{{ request.request_date | fromNow }}</td>
                    <td class="message">{{ request.message }}</td>    
                    <td>
                        <a class="btn btn-default btn-sm give-feedback-btn" ng-href="#/feedback/request/{{ request.id }}/reply/" type="button">
                            Give Feedback
                        </a>
                    </td>
                </tr>
                <tr ng-show="!feedback.feedbackRequests.length">
                    <td colspan="4">You currently don't have any requests for feedback.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="panel" ng-show="feedback.myRecentlySentRequests.length">
        <h2 class="panel-title">People I've asked for feedback</h2>
        <table class="table responsive-table">
            <thead>
                <tr>
                  <th class="width-percent-30">Person</th>
                  <th class="width-percent-15">Sent</th>
                  <th class="width-percent-30">Where you'd like feedback</th>
                  <th class="width-percent-10 centered">Completed</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="request in feedback.myRecentlySentRequests | reverse">
                    <td>
                        <span class="tiny-headshot">
                            <img ng-src="{{ request.reviewer.avatar_small }}" alt="{{ request.reviewer.full_name }}'s avatar" />
                        </span>  
                        {{ request.reviewer.full_name }}
                    </td>
                    <td class="timeago">
                        {{ request.request_date | fromNow }}
                    </td>
                    <td class="message">
                        {{ request.message }}&nbsp;
                    </td>                          
                    <td class="centered">
                        <i ng-show="{{ request.has_been_answered }}" class="fa fa-check" title="Completed"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>    