<div class="container" data-hj-masked>
    <h1>Employee Feedback Report</h1>
    <div class="panel">
        <div style="width:300px;">
			<div class="form-group">
				<label for="startDate"><strong>Start Date</strong></label>
				<input id="startDate" ng-model="feedbackReport.startDate" name="startDate" class="form-control" />
			</div>
			<div class="form-group" style="margin:15px 0;">	
				<label for="endDate"><strong>End Date</strong></label>
				<input id="endDate" ng-model="feedbackReport.endDate" name="endDate" class="form-control" />
			</div>
			<span ng-click="feedbackReport.getFeedbackReport()" class="btn btn-primary">Submit</span>
        </div>
    </div>
    <div>

        <div class="panel" ng-show="feedbackReport.showResults">
            <button class="btn btn-default pull-right" type="button" ng-csv="feedbackReport.csv" filename="scoutmap.csv" csv-header="['Id', 'Employee', 'Total I Requested', 'Total Responded to Me', 'Total Requested of Me',  'Total I Responded To', 'Total Unsolicited I Gave', 'Total Unsolicited I Received', 'Total Digests I Delivered', 'Total Digests I Received']">
                <span class="fa fa-download"></span> Download
            </button>

            <table class="table">
                <thead>
                    <tr>
                        <th></th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('employee.full_name');"><strong>Employee</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'employee.full_name'" ng-class="feedbackReport.reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_i_requested');"><strong>Total I Requested</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_i_requested'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_responded_to_me');"><strong>Total Responded to Me</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_responded_to_me'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_requested_of_me');"><strong>Total Requested of Me</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_requested_of_me'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_i_responded_to');"><strong>Total I Responded To</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_i_responded_to'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_unrequested_i_gave');"><strong>Total Unsolicited I Gave</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_unrequested_i_gave'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_unrequested_given_to_me');"><strong>Total Unsolicited I Received</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_unrequested_given_to_me'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_digests_i_delivered');"><strong>Total Digests I Delivered</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_digests_i_delivered'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                        <th>
                            <a href="" ng-click="feedbackReport.order('total_digests_i_received');"><strong>Total Digests I Received</strong></a>
                            <span class="sortorder fa" ng-show="feedbackReport.predicate === 'total_digests_i_received'" ng-class="reverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="report in feedbackReport.report | orderBy:feedbackReport.predicate:feedbackReport.reverse">
                        <td>{{ $index+1 }}.</td>
                        <td>
                            <a ng-href="#/employees/{{report.employee.id}}" class="tiny-headshot pull-left"><img ng-src="{{ report.employee.avatar_small }}" alt="{{ report.employee.full_name }}'s avatar"/></a>
                            <a href="#/employees/{{report.employee.id}}">{{report.employee.full_name}}</a>
                        </td>
                        <td style="text-align: center">{{report.total_i_requested}}</td>
                        <td style="text-align: center">{{report.total_responded_to_me}}</td>
                        <td style="text-align: center">{{report.total_requested_of_me}}</td>
                        <td style="text-align: center">{{report.total_i_responded_to}}</td>
                        <td style="text-align: center">{{report.total_unrequested_i_gave}}</td>
                        <td style="text-align: center">{{report.total_unrequested_given_to_me}}</td>
                        <td style="text-align: center">{{report.total_digests_i_delivered}}</td>
                        <td style="text-align: center">{{report.total_digests_i_received}}</td>
                    </tr>
                    <tr>
                        <td><strong>Totals</strong></td>
                        <td>
                        </td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_i_requested_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_responded_to_me_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_requested_of_me_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_i_responded_to_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_unrequested_i_gave_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_unrequested_given_to_me_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_digests_i_delivered_total}}</strong></td>
                        <td style="text-align: center"><strong>{{feedbackReport.total_digests_i_received_total}}</strong></td>
                    </tr>
                </tbody>
            </table>
            <div ng-show="busy" class="no-results"><img src="../static/images/loader.gif" alt="Loading spinner" /></div>
        </div>
    </div>
</div>
